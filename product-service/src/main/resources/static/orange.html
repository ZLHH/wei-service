<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>果然新鲜</title>
    <link href="css/orange.css"rel="stylesheet">
    <link href="css/tanchuang.css"rel="stylesheet">
    <link href="css/common.css"rel="stylesheet">
    <link href="css/share.css"rel="stylesheet">
    <link rel="stylesheet" href="http://cdn.static.runoob.com/libs/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="js/jquery-1.12.3.js"></script>
    <script type="text/javascript" src="js/jquery.SuperSlide.2.1.1.js"></script>
    <script type="text/javascript" src="js/My.js"></script>
</head>
<body>
<div class="right">
    <span class="left">&nbsp;</span>
    <div id="loginbox">
    </div>
</div>
<!--顶部导航-->
<div class="headr">
    <div class="heard-con">
        <img src="images/logo.jpg" style="margin-top: 7px;float: left;position: absolute">
        <div class="headr-nav">
            <ul>
                <li><a href="index.html"><span>首页</span></a> </li>
                <li><a href="hot.html">热卖商品</a> </li>
                <li><a href="produ.html">全部产品</a> </li>
                <li><a href="consult.html">最新资讯</a></li>
                <li><a href="touch.html">联系我们</a> </li>
            </ul>
            <div class="sptopfoot">
                <div class="spbottom"  >
                </div>
            </div>
        </div>
        <div class="headr-right">
            <i class="glyphicon glyphicon-shopping-cart" style="font-size: 16px;margin-right: 10px"></i>
        </div>
    </div>
</div>
<!--顶部导航结束-->
<!--banner图片-->
<div class="her-banner">

</div>
<!--banner图片结束-->
<!--主页内容-->
<div class="content">
    <div class="cont-top">
        <div class="cont-left">
            <div class="ctl-img">
                <img src="images/2.jpg">
            </div>
            <div class="collect">
                <div class="coll">
                    <i class="iconfont">&#xe641;</i>
                    收藏
                </div>
                <div class="coll">
                    <i class="iconfont">&#xe617;</i>
                    分享
                    <div class="share"></div>
                </div>
            </div>
            <div class="next">
                <div class="nt">
                    上一个
                </div>
                <div class="nt ntp">
                    下一个
                </div>
            </div>
        </div>
        <div class="cont-right">
            <div class="J_productTitle title g_minor">
                <span>南非进口黄柠檬 6个装</span>
                <span id="productQrCode" class="webSiteQrCode">&nbsp;
                <div class="code">
                    <img src="images/qrCode%20(1).gif">
                    <p>扫描二微码</p>
                </div>
                </span>
            </div>
           <div class="pic">
               <span class="ppi">价格:</span>
               <span class="f-mallUnit">￥</span>
               <span class="pcc">data.productPrice</span>
           </div>
            <div class="pict">
                <div class="f-proSatifySumWrap">
                    <div class="f-satifyDetail">
                        <span class="g_minor  salesVolume">评论：</span><span class="J_commNum">1</span>条
                    </div>
                    <div class="J_pdDetailBorder f-pdDetailBorder"></div>
                    <div class="f-satifyDetail">
                        <span class="g_minor  salesVolume">收藏：</span>1
                    </div>
                </div>
            </div>

            <div class="fk-pd5MallCartCount">
                <div class="f-cartbuyCountWrap">
                    <span class="f-propName g_minor" style="width:75px;min-width:75px;max-width: 75px;">购买数量：</span>
                    <input type="text"  value="1" class="g_itext cartBuyCount f-cartBuyCount">
                </div>
                <div class="f-buyCountBtn">
                    <div  class="f-countBtn mallJian"></div>
                    <div  class="f-countBtn disableMallJian"></div>
                </div>
            </div>
            <div class="fk-pd5MallActBtns">
                <div class="buttn">
                    加入购物车
                </div>
                <div class="buttn butto">
                    立即购买
                </div>

            </div>

        </div>
    </div>

    <div class="cont-bot">
        <div class="hd">
            <ul>
                <li class="active">
                    <div class="hd1 acti" >
                    </div>
                    产品详情
                </li>
                <li>
                    <div class="hd1">
                    </div>
                    产品评论(1)
                </li>
                <li>
                    <div class="hd1">
                    </div>
                    销售记录(0)
                </li>
            </ul>

        </div>
        <div class="bd">
            <div class="bd1"style="display: block">
                <img src="images/or-1.png">
                <img src="images/or-2.png">
                <img src="images/or-3.png">
                <img src="images/or-4.png">
            </div>
            <div class="bd1">
                <img src="images/or-5.jpg">
                <img src="images/or-6.jpg">
            </div>
            <div class="bd1">
                <div class="sale">
                    <ul>
                        <li>买家</li>
                        <li>选项​​信息</li>
                        <li>数量</li>
                        <li>成交时间</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

</div>
<!--主页内容结束-->
<!--底部-->
<div class="footer">
    <div class="ft-con">
        <div class="ft-top">
            <img src="images/fot-1.jpg">
        </div>
        <div class="ft-bo">
            <div class="ft-b">
                <h3>服务保障</h3>
                <p>正品保证</p>
                <p>7天无理由退换</p>
                <p>退货返运费</p>
                <p>7X15小时客户服务</p>

            </div>
            <div class="ft-b">
                <h3>支付方式</h3>
                <p>公司转账</p>
                <p>货到付款</p>
                <p>在线支付</p>
                <p>分期付款</p>

            </div>
            <div class="ft-b">
                <h3>商家服务</h3>
                <p>商家入驻</p>
                <p>培训中心</p>
                <p>广告服务</p>
                <p>服务市场</p>

            </div>
            <div class="ft-b">
                <h3>服务保障</h3>
                <p>免运费</p>
                <p>海外配送</p>
                <p>EMS</p>
                <p>211限时达</p>

            </div>

        </div>
        <div class="banq">
            <p>©2016 果然新鲜 版权所有</p>
            <p>手机版 | 本站使用<span><img src="images/ft.jpg"></span>建站搭建 | 管理登录</p>
        </div>

    </div>

</div>
<!--底部结束-->
<script src="js/banner.js"></script>
<script>

    $(function () {
        var ele = $(".cont-top");
        var id = window.location.href.split("=")[1];
        showDetail(ele, id);
    });

    function showDetail(ele, id) {
        $(ele).empty();
        $.get("querry/"+id, function(r){
            console.log(r.map.productInfo);
            if (r.code == 100) {
                var ProductInfo = '<div class="cont-left"><div class="ctl-img"><img src="images/'+r.map.productInfo.productIcon+'"></div><div class="collect">\n' +
                    '                <div class="coll">\n' +
                    '                    <i class="iconfont">&#xe641;</i>\n' +
                    '                    收藏\n' +
                    '                </div>\n' +
                    '                <div class="coll">\n' +
                    '                    <i class="iconfont">&#xe617;</i>\n' +
                    '                    分享\n' +
                    '                    <div class="share"></div>\n' +
                    '                </div>\n' +
                    '            </div>\n' +
                    '            <div class="next">\n' +
                    '                <div class="nt prov">\n' +
                    '                    上一个\n' +
                    '                </div>\n' +
                    '                <div class="nt ntp">\n' +
                    '                    下一个\n' +
                    '                </div>\n' +
                    '            </div>' +
                    '</div>' +
                    '<div class="cont-right">\n' +
                    '            <div class="J_productTitle title g_minor">\n' +
                    '                <span>'+r.map.productInfo.productDescription+'</span>\n' +
                    '                <span id="productQrCode" class="webSiteQrCode">&nbsp;\n' +
                    '                <div class="code">\n' +
                    '                    <img src="images/qrCode%20(1).gif">\n' +
                    '                    <p>扫描二微码</p>\n' +
                    '                </div>\n' +
                    '                </span>\n' +
                    '            </div>\n' +
                    '           <div class="pic">\n' +
                    '               <span class="ppi">价格:</span>\n' +
                    '               <span class="f-mallUnit">￥</span>\n' +
                    '               <span class="pcc">'+r.map.productInfo.productPrice+'</span>\n' +
                    '           </div>\n' +
                    '            <div class="pict">\n' +
                    '                <div class="f-proSatifySumWrap">\n' +
                    '                    <div class="f-satifyDetail">\n' +
                    '                        <span class="g_minor  salesVolume">评论：</span><span class="J_commNum">1</span>条\n' +
                    '                    </div>\n' +
                    '                    <div class="J_pdDetailBorder f-pdDetailBorder"></div>\n' +
                    '                    <div class="f-satifyDetail">\n' +
                    '                        <span class="g_minor  salesVolume">收藏：</span>1\n' +
                    '                    </div>\n' +
                    '                </div>\n' +
                    '            </div>\n' +
                    '            <div class="fk-pd5MallCartCount">\n' +
                    '                <div class="f-cartbuyCountWrap">\n' +
                    '                    <span class="f-propName g_minor" style="width:75px;min-width:75px;max-width: 75px;">购买数量：</span>\n' +
                    '                    <input type="text" id="number" value="1" class="g_itext cartBuyCount f-cartBuyCount">\n' +
                    '                </div>\n' +
                    '                <div class="f-buyCountBtn">\n' +
                    '                    <div  class="f-countBtn mallJian"></div>\n' +
                    '                    <div  class="f-countBtn disableMallJian"></div>\n' +
                    '                </div>\n' +
                    '            </div>\n' +
                    '            <div class="fk-pd5MallActBtns">\n' +
                    '                <div class="buttn joincar">\n' +
                    '                    加入购物车\n' +
                    '                </div>\n' +
                    '                <div class="buttn butto">\n' +
                    '                    立即购买\n' +
                    '                </div>\n' +
                    '            </div>\n' +
                    '        </div>'
                console.log(r.map.productInfo);
                document.cookie="productId="+r.map.productInfo.productId;
                document.cookie="productPrice="+r.map.productInfo.productPrice;
                document.cookie="productName="+r.map.productInfo.productName;
                ele.append(ProductInfo);
            } else {

            }
        });
    }



    var ainp =document.getElementsByClassName('f-countBtn');
    $(document).on("click", ".mallJian", function () {
        var num1=parseInt(document.getElementById('number').value)
        num1= num1 + 1
        console.log(num1);
        ainp[1].disabled =false;
        ainp[1].style.cursor = 'auto';
        document.getElementById('number').value=num1;
        console.log(document.getElementById('number').value);
    });
    $(document).on("click", ".disableMallJian", function () {
        var num1=parseInt(document.getElementById('number').value)
        num1= num1 - 1
        if(num1 < 1){
            num1 = 1;
            this.disabled = true;
            this.style.cursor ='not-allowed'
        }
        document.getElementById('number').value=num1
    });

    $(document).on("click", ".joincar", function () {
        var productId=getCookie("productId");
        var productPrice = getCookie("productPrice");
        var counts = parseInt(document.getElementById('number').value);
        var productName = getCookie("productName");
        console.log(productId,productPrice,counts);
        $.ajax({
            url: '/shoppingcar/save',
            type: 'post',
            dataType: "json",
            data: "productId=" + productId + "&productPrice=" + productPrice+"&counts="+counts+"&productName="+productName,
            success: function (data) {
                if (data.code == '100') {
                    alert(data.msg);
                    window.location.href = "index.html";
                } else {
                    alert("加入失败");
                }
            }
        });
    });

    $(document).on("click", ".prov", function () {
        var id = parseInt(window.location.href.split("=")[1])-1;
        window.location.href='orange.html?data='+id;
    });

    $(document).on("click", ".ntp", function () {
        var id = parseInt(window.location.href.split("=")[1])+1;
        window.location.href='orange.html?data='+id;
    });

    function getCookie(cookie_name) {
        var allcookies = document.cookie;
        var cookie_pos = allcookies.indexOf(cookie_name);   //索引的长度
        // 如果找到了索引，就代表cookie存在，
        // 反之，就说明不存在。
        if (cookie_pos != -1) {
            // 把cookie_pos放在值的开始，只要给值加1即可。
            cookie_pos += cookie_name.length + 1;      //这里容易出问题，所以请大家参考的时候自己好好研究一下
            var cookie_end = allcookies.indexOf(";", cookie_pos);
            if (cookie_end == -1) {
                cookie_end = allcookies.length;
            }
            var value = unescape(allcookies.substring(cookie_pos, cookie_end));         //这里就可以得到你想要的cookie的值了。。。
        }
        return value;
    }

</script>

<!--弹框-->
<div class="popup">
    <div class="login">
        <div class="del">×</div>
        <div class="lg-cont">
            <div class="lhd">
                <ul>
                    <li class="active">登录</li>
                    <li>注册</li>
                </ul>
                <div class="lhdfoot">
                    <div class="lhdbottom"  >
                    </div>
                </div>

            </div>
            <div class="lbd">
                <div class="lbd1"style="display: block">
                    <div id="memberLoginAcct" class="J_memberLoginItem memberLoginDialogItem">
                        <input id="memberAcct" class="generateInput memberAcctInput" type="text" value="" placeholder="账号">
                    </div>
                    <div id="memberLoginPwd" class="J_memberLoginItem memberLoginDialogItem itemSpace">
                        <input id="memberPwd" class="generateInput memberPwdInput" type="password" placeholder="密码"}>
                    </div>
                    <div class="loginButton loginButton">
                        <div class="middle" onclick="login()">
                            登录
                        </div>
                    </div>
                    <div class="bott"></div>
                </div>
                <div class="lbd1">
                    <div class="msv">
                        <div>
                            <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                        </div>
                        <div class="memberSignupItem">
                            <div class="itemMiddle">
                                <input type="text" id="memberSignupAccount"  placeholder="账号" >
                            </div>
                            <div class="itemRight">*</div>
                        </div>
                        <div class="memberSignupItem ">
                            <div class="itemMiddle">
                                <input type="password" id="memberSignupPwd" placeholder="密码" maxlength="50">
                            </div>
                            <div class="itemRight">*</div>
                        </div>
                        <div class="memberSignupItem">
                            <div class="itemMiddle">
                                <input type="password" id="memberSignupRepwd" placeholder="确认密码" maxlength="50">
                            </div>
                            <div class="itemRight">*</div>
                        </div>
                        <div class="memberSignupItem">
                            <div class="itemMiddle">
                                <input id="email" name="邮箱" placeholder="邮箱" class="userAddItem" type="text" maxlength="50">
                            </div>
                            <div class="itemRight"></div>
                        </div>
                        <div class="memberSignupItem_captcha">
                            <div class="itemMiddle" style="float:left;width: 150px;">
                                <input id="memberSignupCaptcha" type="text" maxlength="4" placeholder="验证码">
                            </div>
                            <div class="itemRightp">
                                <img alt="" id="memberSignupCaptchaImg" class="memberSignupCaptchaImg" onclick="change()" title="看不清，换一张" src="images/validateCode.jpg">
                            </div>
                        </div>
                    </div>
                    <div class="loginButton loginButton">
                        <div class="middle" onclick="register()">注册</div>
                    </div>
                    <div class="bott"></div>
                </div>
            </div>

        </div>
    </div>
</div>
<!--弹框结束-->
</body>
<script src="js/orange.js"></script>
</html>